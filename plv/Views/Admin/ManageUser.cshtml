@model plv.ViewModels.ManageUserViewModel
@{
    ViewData["Title"] = "ManageUser";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>ManageUser</h1>


@using (Html.BeginForm("Edit", "Admin"))
{

    @Html.ValidationSummary(true, "please fix following errors")

    <div class="form-group">
        @Html.LabelFor(m => m.User.UserName)
        @Html.TextBoxFor(m => m.User.UserName, new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.User.UserName)
    </div>
    <!--
    <div class="form-group">
      @*  @Html.LabelFor(m => m.SelectedRoleId)
        @Html.DropDownListFor(m => m.SelectedRoleId, new SelectList(Model.Role, "Id", "Name"), "", new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.SelectedRoleId)*@
    </div>
    -->
    <div class="form-group overrides">
        <ul>
            @foreach (var role in Model.RolesList)
            {
                <li>
                    <label>
                        @role.Name
                        @if (Model.CurrentUserRoles.Contains(role.Name))
                        {
                            <input id="hidden-@role.Name" type="hidden" name="idList" value="unchecked-@role.Name" disabled>
                            <input id="@role.Name" type="checkbox" name="idList" value="@role.Name" checked onclick=" if (document.getElementById('@role.Name').checked) { document.getElementById('hidden-@role.Name').disabled = true; } else { document.getElementById('hidden-@role.Name').disabled = false; document.getElementById('hidden-@role.Name').checked }">
                        }
                        else
                        {
                            <input id="hidden-@role.Name" type="hidden" name="idList" value="unchecked-@role.Name" checked>
                            <input id="@role.Name" type="checkbox" name="idList" value="@role.Name" onclick=" if (document.getElementById('@role.Name').checked) { document.getElementById('hidden-@role.Name').disabled = true; } else { document.getElementById('hidden-@role.Name').disabled = false; document.getElementById('hidden-@role.Name').checked }">
                        }
                        <span class="check"></span>
                    </label>
                </li>
            }
        </ul>
    </div>
    

    @Html.HiddenFor(m => m.User.Id)
    @Html.AntiForgeryToken()
    <button type="submit" class="btn btn-primary">Save</button>
}

